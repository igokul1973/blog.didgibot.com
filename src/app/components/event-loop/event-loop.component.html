<article>
    <h1 class="svg">JavaScript Event Loop Visualizer</h1>
    <div class="controls">
        <button mat-button (click)="addTaskToCallStack('sync')">Add sync task</button>
        <button mat-button (click)="addTaskToCallStack('macro')">Add timer (macrotask)</button>
        <button mat-button (click)="addTaskToCallStack('micro')">Add promise (microtask)</button>
        <button mat-button (click)="startLoop()" [disabled]="isRunning()">▶ Start event loop</button>
        <button mat-button (click)="reset()">↻ Reset</button>
    </div>
    <div id="canvas-container">
        <svg viewBox="0 0 1000 600" id="visualization" #visualization class="crackme"></svg>
    </div>
    <div class="explanation">Current action: {{ explanation() }}</div>
    <div class="console-output" #console>
        <div>Log:</div>
        @for (output of consoleOutput(); track $index) {
            <div class="console-line">{{ output }}</div>
        }
    </div>
    <!-- <div>Task counter: {{ taskCounter() || 0 }}</div> -->
    <!-- <div>Call stack: {{ callStack().join(', ') || '[]' }}</div> -->
</article>
