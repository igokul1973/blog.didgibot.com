<div [ngClass]="{ 'search-field': true, 'search-field-mobile': isMobile, info: isMobile }">
    <mat-form-field
        subscriptSizing="dynamic"
        [ngClass]="{
            'search-input-field': true,
            info: isMobile,
            'input-field-mobile': isMobile,
            expanded: isMobile || isExpanded(),
            collapsed: !isMobile && !isExpanded()
        }"
    >
        <input
            matInput
            placeholder="Search (min 3 characters)"
            [(ngModel)]="searchQuery"
            (ngModelChange)="changeSearchQuery($event)"
            (focus)="expandInput()"
        />
    </mat-form-field>
    <button
        mat-icon-button
        matSuffix
        [matTooltip]="
            isMobile && isExpanded() && searchQuery()
                ? 'Reset search'
                : !isMobile && isExpanded() && searchQuery()
                  ? 'Close and reset search'
                  : !isMobile && isExpanded() && !searchQuery()
                    ? 'Close search'
                    : 'Search'
        "
        (click)="toggleInput()"
        [ngClass]="{
            'search-icon': true,
            info: true,
            'search-icon-mobile': isMobile
        }"
    >
        @if ((isMobile && isExpanded() && searchQuery()) || (!isMobile && isExpanded())) {
            <mat-icon>search_off</mat-icon>
        } @else {
            <mat-icon>search</mat-icon>
        }
    </button>
</div>
