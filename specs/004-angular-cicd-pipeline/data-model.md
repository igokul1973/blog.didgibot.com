# Data Model: Angular frontend CI/CD pipeline

## Entity: CI/CD Pipeline Run

- **Description**: A single execution of the Angular frontend Jenkins pipeline job.
- **Key attributes**:
    - `jobName` – name of the Jenkins job.
    - `runId` – unique run/build identifier.
    - `triggerType` – how the run was triggered (e.g., push, manual, scheduled).
    - `branchOrRef` – branch or ref Jenkins was configured to build.
    - `status` – success, failure, aborted.
    - `startTime` / `endTime` – timestamps for duration tracking.
    - `stages` – list of stage results (lint, tests, coverage, build, image build/push).
    - `coverageSummary` – aggregate coverage metrics for the run.
    - `artifacts` – links/paths to coverage reports, logs, and other outputs.

## Entity: Coverage Report Artifact

- **Description**: Visual and machine-readable reports generated by the testing/coverage stage.
- **Key attributes**:
    - `runId` – associated pipeline run.
    - `reportLocation` – path or URL to the coverage report (e.g., HTML output).
    - `perFileCoverage` – per-file coverage percentages for in-scope files.
    - `thresholdBreaches` – list of files below the 90% threshold.

## Entity: CI Runner Docker Image (ephemeral)

- **Description**: Docker image built from `cicd/Dockerfile.production` inside the pipeline and used to run lint/tests/build/version bump stages.
- **Key attributes**:
    - `dockerfilePath` – path to the Dockerfile used (e.g., `cicd/Dockerfile.production`).
    - `baseNodeVersion` – Node.js major version (aligned with project).
    - `tooling` – installed tools (git, Chromium, `pnpm`, etc.).

## Entity: Angular Application Docker Image

- **Description**: Docker image containing the built Angular frontend, deployed to the production Kubernetes cluster.
- **Key attributes**:
    - `imageName` – repository/name for the app image.
    - `tag` – tag format used by the pipeline (e.g., build number or semantic version).
    - `sourceCommit` – commit SHA used for the build.
    - `buildArtifactsPath` – location of the built `dist/` artifacts used in the image.
    - `environment` – target environment (e.g., production).

## Relationships

- A **CI/CD Pipeline Run** produces one or more **Coverage Report Artifacts**.
- A **CI/CD Pipeline Run** builds and pushes exactly one **Angular Application Docker Image** per successful full run.
- All **CI/CD Pipeline Runs** for this feature build and run a **CI Runner Docker Image (ephemeral)** during execution.
